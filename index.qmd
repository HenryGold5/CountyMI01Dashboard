---
title: "District 1 Dashboards"
format:
  html:
    page-layout: full
server: shiny
---

```{r}
#| context: setup
#| include: false
library(shiny)
library(shinymanager)
library(bslib)

# Define credentials for password protection
credentials <- data.frame(
  user = c("admin"),
  password = c("district1"), # Change this password!
  admin = c(TRUE),
  stringsAsFactors = FALSE
)
```

```{r}
#| panel: fill

# Wrap the UI with secure_app
ui <- page_fluid(
  # Add authentication module
  auth_ui(id = "auth"),

  div(
    class = "container",
    style = "margin-top: 50px;",

    h1("District 1 Dashboards", class = "text-center mb-5"),

    div(
      class = "row justify-content-center",

      # County Dashboard Card
      div(
        class = "col-md-6 col-lg-4 mb-4",
        div(
          class = "card h-100 shadow-sm",
          div(
            class = "card-body text-center",
            h3("County Analysis Dashboard", class = "card-title"),
            p("Comprehensive analysis of District 1 counties including demographics, voting patterns, and economic indicators.", class = "card-text"),
            tags$a(
              href = "CountyOutputDashboard.qmd",
              class = "btn btn-primary btn-lg",
              "View Dashboard"
            )
          )
        )
      ),

      # Placeholder for future dashboard
      div(
        class = "col-md-6 col-lg-4 mb-4",
        div(
          class = "card h-100 shadow-sm",
          style = "opacity: 0.6;",
          div(
            class = "card-body text-center",
            h3("Future Dashboard", class = "card-title text-muted"),
            p("Additional dashboards will be added here.", class = "card-text text-muted"),
            tags$button(
              class = "btn btn-secondary btn-lg",
              disabled = "disabled",
              "Coming Soon"
            )
          )
        )
      )
    ),

    # Footer
    div(
      class = "text-center mt-5 text-muted",
      p("District 1 Analysis System")
    )
  )
)

# Call the authentication server
server <- function(input, output, session) {
  # Authentication
  res_auth <- callModule(
    module = auth_server,
    id = "auth",
    check_credentials = check_credentials(credentials)
  )
}

shinyApp(ui, server)
```
